<head>
  <title>Installation</title>
</head>
<body>
<h1>Installation</h1>
Before installing, you need:
<ul>
  <li>A web server, such as <a href="http://www.apache-ssl.org">Apache-SSL</a> or <a href="http://www.apache.org">Apache</a>
  <li><a href="http://www.openssh.com//">SSH</a>
  <li><a href="http://www.perl.com/CPAN/doc/relinfo/INSTALL.html">Perl</a> (at least 5.004_05 for the 5.004 series or 5.005_03 for the 5.005 series.  Don't enable experimental features like threads or the PerlIO abstraction layer.)
  <li>A <b>transactional</b> database engine supported by Perl's <a href="http://www.hermetica.com/technologia/DBI/">DBI</a>.  <a href="http://www.postgresql.org/">PostgreSQL</a> is recommended.  (see the <a href="postgresql.html">PostgreSQL notes</a>)  <b>MySQL's default <a href="http://www.mysql.com/doc/M/y/MyISAM.html">MyISAM</a> and <a href="http://www.mysql.com/doc/I/S/ISAM.html">ISAM</a> table types are not supported</b>.  If you really want to use MySQL, you need to use one of the new <a href="http://www.mysql.com/doc/T/a/Table_types.html">transaction-safe table types</a> such as <a href="http://www.mysql.com/doc/B/D/BDB.html">BDB</a>.
  <li>Perl modules (<a href="http://www.perl.com/CPAN/doc/manual/html/lib/CPAN.html">CPAN</a> will query, download and build perl modules automatically)
    <ul>
      <li><a href="http://search.cpan.org/search?dist=Array-PrintCols">Array-PrintCols</a>
      <li><a href="http://search.cpan.org/search?dist=Term-Query">Term-Query</a> (make test broken; install manually)
      <li><a href="http://search.cpan.org/search?dist=MIME-Base64">MIME-Base64</a>
      <li><a href="http://search.cpan.org/search?dist=Digest-MD5">Digest-MD5</a>
      <li><a href="http://search.cpan.org/search?dist=URI">URI</a>
      <li><a href="http://search.cpan.org/search?dist=HTML-Parser">HTML-Parser</a>
      <li><a href="http://search.cpan.org/search?dist=libnet">libnet</a>
      <li><a href="http://search.cpan.org/search?dist=Locale-Codes">Locale-Codes</a>
      <li><a href="http://search.cpan.org/search?dist=Net-Whois">Net-Whois</a>
      <li><a href="http://search.cpan.org/search?dist=libwww-perl">libwww-perl</a>
      <li><a href="http://search.cpan.org/search?dist=Business-CreditCard">Business-CreditCard</a>
      <li><a href="http://search.cpan.org/search?dist=Data-ShowTable">Data-ShowTable</a>
      <li><a href="http://search.cpan.org/search?dist=MailTools">MailTools</a>
      <li><a href="http://search.cpan.org/search?dist=TimeDate">TimeDate</a>
      <li><a href="http://search.cpan.org/search?dist=DateManip">DateManip</a>
      <li><a href="http://search.cpan.org/search?dist=File-CounterFile">File-CounterFile</a>
      <li><a href="http://search.cpan.org/search?dist=FreezeThaw">FreezeThaw</a>
      <li><a href="http://search.cpan.org/search?dist=String-Approx">String-Approx</a>
      <li><a href="http://search.cpan.org/search?dist=Text-Template">Text-Template</a>
      <li><a href="http://search.cpan.org/search?dist=DBI">DBI
      <li><a href="http://search.cpan.org/search?mode=module&query=DBD">DBD for your database engine</a>
    </ul>
</ul>
Install the Freeside distribution:
<ul>
  <li>Add the user `freeside' to your system.
  <li>Add the freeside database to your database engine.  (with <a href="http://www.mysql.com/Manual_chapter/manual_Reference.html#CREATE_DATABASE">MySQL</a>) (with <a href="http://www.postgresql.org/docs/admin/manage-ag.htm#AEN854">PostgreSQL</a>)
  <li>Allow the freeside user full access to the freeside database.
    <ul>
      <li> with <a href="http://www.mysql.com/Manual_chapter/manual_Privilege_system.html#Privilege_system">MySQL</a>:<pre>$ mysqladmin -u root password '<i>set_a_root_database_password</i>'
$ mysql -u root -p
mysql> GRANT SELECT,INSERT,UPDATE,DELETE,INDEX,ALTER,CREATE,DROP on freeside.* TO freeside@localhost IDENTIFIED BY '<i>set_a_freeside_database_password</i>';</pre>
      <li> with <a href="http://www.postgresql.org/docs/admin/newuser.htm">PostgreSQL</a>
    </ul>
  <li>Unpack the tarball: <pre>gunzip -c fs-x.y.z.tar.gz | tar xvf -</pre>
  <li>Build and install the Perl libraries:
    <pre>
$ cd FS/
$ perl Makefile.PL
$ make
$ su
# make install</pre>
  <li>Copy or link fs-x.y.z/htdocs to your web server's document space.  <pre>mkdir /usr/local/apache/htdocs/freeside
cp -r fs-x.y.z/htdocs/* /usr/local/apache/htdocs/freeside</pre> or <pre>ln -s /full/path/to/fs-x.y.z/htdocs /usr/local/apache/htdocs/freeside</pre>
  <li>Restrict access to this web interface.  (with <a href="http://httpd.apache.org/docs/misc/FAQ.html#user-authentication">Apache</a>)
  <li>Enable CGI execution for files with the `.cgi' extension.  (with <a href="http://www.apache.org/docs/mod/mod_mime.html#addhandler">Apache</a>)
  <li>Set ownership and permissions for the web interface.  The web interface needs to run as the freeside user - there are several ways to do this.
    <ul>
      <li>Use Perl's setuid emulation: see the <a href="http://www.perl.com/CPAN-local/doc/manual/html/pod/perlsec.html#Security_Bugs">Security Bugs</a> section of the <a href="http://www.perl.com/CPAN-local/doc/manual/html/pod/perlsec.html">perlsec</a> manpage.
<pre>cd /usr/local/apache/htdocs/freeside
chown -R freeside .
chmod 4755 browse/*.cgi edit/*.cgi edit/process/*.cgi misc/*.cgi misc/process/*.cgi search/*.cgi view/*.cgi</pre>
      <li>Use Apache's <a href="http://www.apache.org/docs/suexec.html">suEXEC</a>.
<pre>cd /usr/local/apache/htdocs/freeside
chown -R freeside .
chmod 755 browse/*.cgi edit/*.cgi edit/process/*.cgi misc/*.cgi misc/process/*.cgi search/*.cgi view/*.cgi</pre>
      <li>Use <a href="http://perl.apache.org/">mod_perl</a>.  You should run a separate iteration of Apache[-SSL] as the freeside user.  (Warning:  The redirect method of CGI.pm 2.36 [as distributed with Perl 5.004_04] is broken under mod_perl.  Downlaod the current version from <a href="http://www.perl.com/CPAN/modules/by-module/CGI">CPAN</a>.  Apache 1.3.6 is also highly recommended because of signal handling problems in earlier versions.)
<pre>cd /usr/local/apache/htdocs/freeside
chown -R root .
chmod 755 browse/*.cgi edit/*.cgi edit/process/*.cgi misc/*.cgi misc/process/*.cgi search/*.cgi view/*.cgi</pre>
    </ul>
<li>Create the necessary <a href="config.html">configuration files</a>.
<li>Create the `/usr/local/etc/freeside/counters.<i>datasrc</i>', and 
  `/usr/local/etc/freeside/export.<i>datasrc</i>' directories for each <i>datasrc</i> (owned by the freeside user).
  <li>As the freeside user, run bin/fs-setup to create the database tables.
  <li>Now proceed to the initial <a href="admin.html">administration</a> of your installation.
</ul>
</body>
