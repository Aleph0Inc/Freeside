<HTML>
<HEAD>
<TITLE>FS::svc_acct_sm - Object methods for svc_acct_sm records</TITLE>
<LINK REV="made" HREF="mailto:none">
</HEAD>

<BODY>

<!-- INDEX BEGIN -->

<UL>

	<LI><A HREF="#NAME">NAME</A>
	<LI><A HREF="#SYNOPSIS">SYNOPSIS</A>
	<LI><A HREF="#DESCRIPTION">DESCRIPTION</A>
	<LI><A HREF="#METHODS">METHODS</A>
	<LI><A HREF="#VERSION">VERSION</A>
	<LI><A HREF="#BUGS">BUGS</A>
	<LI><A HREF="#SEE_ALSO">SEE ALSO</A>
</UL>
<!-- INDEX END -->

<HR>
<P>
<H1><A NAME="NAME">NAME</A></H1>
<P>
FS::svc_acct_sm - Object methods for svc_acct_sm records

<P>
<HR>
<H1><A NAME="SYNOPSIS">SYNOPSIS</A></H1>
<P>
<PRE>  use FS::svc_acct_sm;
</PRE>
<P>
<PRE>  $record = new FS::svc_acct_sm \%hash;
  $record = new FS::svc_acct_sm { 'column' =&gt; 'value' };
</PRE>
<P>
<PRE>  $error = $record-&gt;insert;
</PRE>
<P>
<PRE>  $error = $new_record-&gt;replace($old_record);
</PRE>
<P>
<PRE>  $error = $record-&gt;delete;
</PRE>
<P>
<PRE>  $error = $record-&gt;check;
</PRE>
<P>
<PRE>  $error = $record-&gt;suspend;
</PRE>
<P>
<PRE>  $error = $record-&gt;unsuspend;
</PRE>
<P>
<PRE>  $error = $record-&gt;cancel;
</PRE>
<P>
<HR>
<H1><A NAME="DESCRIPTION">DESCRIPTION</A></H1>
<P>
An FS::svc_acct object represents a virtual mail alias. FS::svc_acct
inherits from FS::Record. The following fields are currently supported:

<DL>
<DT><STRONG><A NAME="item_svcnum">svcnum - primary key (assigned automatcially for new accounts)</A></STRONG><DD>
<DT><STRONG><A NAME="item_domsvc">domsvc - svcnum of the virtual domain (see FS::svc_domain)</A></STRONG><DD>
<DT><STRONG><A NAME="item_domuid">domuid - uid of the target account (see FS::svc_acct)</A></STRONG><DD>
<DT><STRONG><A NAME="item_domuser">domuser - virtual username</A></STRONG><DD>
</DL>
<P>
<HR>
<H1><A NAME="METHODS">METHODS</A></H1>
<DL>
<DT><STRONG><A NAME="item_new">new HASHREF</A></STRONG><DD>
<P>
Creates a new virtual mail alias. To add the virtual mail alias to the
database, see <A HREF="#insert">insert</A>.

<DT><STRONG><A NAME="item_insert">insert</A></STRONG><DD>
<P>
Adds this virtual mail alias to the database. If there is an error, returns
the error, otherwise returns false.

<P>
The additional fields pkgnum and svcpart (see <A HREF="../FS/cust_svc.html">FS::cust_svc</A>) should be defined. An FS::cust_svc record will be created and inserted.

<P>
If the configuration values (see <A HREF="../FS/Conf.html">FS::Conf</A>) shellmachine and qmailmachines exist, and domuser is `*' (meaning a
catch-all mailbox), the command:

<P>
<PRE>  [ -e $dir/.qmail-$qdomain-default ] || {
    touch $dir/.qmail-$qdomain-default;
    chown $uid:$gid $dir/.qmail-$qdomain-default;
  }
</PRE>
<P>
is executed on shellmachine via ssh (see <EM>dot-qmail</EM>). This behaviour can be surpressed by setting $FS::svc_acct_sm::nossh_hack
true.

<DT><STRONG><A NAME="item_delete">delete</A></STRONG><DD>
<P>
Deletes this virtual mail alias from the database. If there is an error,
returns the error, otherwise returns false.

<P>
The corresponding FS::cust_svc record will be deleted as well.

<DT><STRONG><A NAME="item_replace">replace OLD_RECORD</A></STRONG><DD>
<P>
Replaces OLD_RECORD with this one in the database. If there is an error,
returns the error, otherwise returns false.

<DT><STRONG><A NAME="item_suspend">suspend</A></STRONG><DD>
<P>
Just returns false (no error) for now.

<P>
Called by the suspend method of FS::cust_pkg (see <A HREF="../FS/cust_pkg.html">FS::cust_pkg</A>).

<DT><STRONG><A NAME="item_unsuspend">unsuspend</A></STRONG><DD>
<P>
Just returns false (no error) for now.

<P>
Called by the unsuspend method of FS::cust_pkg (see <A HREF="../FS/cust_pkg.html">FS::cust_pkg</A>).

<DT><STRONG><A NAME="item_cancel">cancel</A></STRONG><DD>
<P>
Just returns false (no error) for now.

<P>
Called by the cancel method of FS::cust_pkg (see <A HREF="../FS/cust_pkg.html">FS::cust_pkg</A>).

<DT><STRONG><A NAME="item_check">check</A></STRONG><DD>
<P>
Checks all fields to make sure this is a valid virtual mail alias. If there
is an error, returns the error, otherwise returns false. Called by the
insert and replace methods.

<P>
Sets any fixed values; see <A HREF="../FS/part_svc.html">FS::part_svc</A>.

</DL>
<P>
<HR>
<H1><A NAME="VERSION">VERSION</A></H1>
<P>
$Id: svc_acct_sm.html,v 1.2 2000-03-03 18:22:43 ivan Exp $

<P>
<HR>
<H1><A NAME="BUGS">BUGS</A></H1>
<P>
The remote commands should be configurable.

<P>
The <CODE>$recref</CODE> stuff in sub check should be cleaned up.

<P>
<HR>
<H1><A NAME="SEE_ALSO">SEE ALSO</A></H1>
<P>
<A HREF="../FS/Record.html">FS::Record</A>, <A HREF="../FS/Conf.html">FS::Conf</A>, <A HREF="../FS/cust_svc.html">FS::cust_svc</A>, <A HREF="../FS/part_svc.html">FS::part_svc</A>, <A HREF="../FS/cust_pkg.html">FS::cust_pkg</A>,
<A HREF="../FS/svc_acct.html">FS::svc_acct</A>, <A HREF="../FS/svc_domain.html">FS::svc_domain</A>, <A HREF="../FS/SSH.html">FS::SSH</A>, <EM>ssh</EM>, <EM>dot-qmail</EM>, schema.html from the base documentation.

</BODY>

</HTML>
