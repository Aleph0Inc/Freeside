NAME
    FS::svc_domain - Object methods for svc_domain records

SYNOPSIS
      use FS::svc_domain;

      $record = new FS::svc_domain \%hash;
      $record = new FS::svc_domain { 'column' => 'value' };

      $error = $record->insert;

      $error = $new_record->replace($old_record);

      $error = $record->delete;

      $error = $record->check;

      $error = $record->suspend;

      $error = $record->unsuspend;

      $error = $record->cancel;

DESCRIPTION
    An FS::svc_domain object represents a domain. FS::svc_domain
    inherits from FS::svc_Common. The following fields are currently
    supported:

    svcnum - primary key (assigned automatically for new accounts)
    domain
METHODS
    new HASHREF
        Creates a new domain. To add the domain to the database, see
        the section on "insert".

    insert
        Adds this domain to the database. If there is an error,
        returns the error, otherwise returns false.

        The additional fields *pkgnum* and *svcpart* (see the
        FS::cust_svc manpage) should be defined. An FS::cust_svc
        record will be created and inserted.

        The additional field *action* should be set to *N* for new
        domains or *M* for transfers.

        A registration or transfer email will be submitted unless
        $FS::svc_domain::whois_hack is true.

        The additional field *email* can be used to manually set the
        admin contact email address on this email. Otherwise, the
        svc_acct records for this package (see the FS::cust_pkg
        manpage) are searched. If there is exactly one svc_acct
        record in the same package, it is automatically used.
        Otherwise an error is returned.

    delete
        Deletes this domain from the database. If there is an error,
        returns the error, otherwise returns false.

        The corresponding FS::cust_svc record will be deleted as
        well.

    replace OLD_RECORD
        Replaces OLD_RECORD with this one in the database. If there
        is an error, returns the error, otherwise returns false.

    suspend
        Just returns false (no error) for now.

        Called by the suspend method of FS::cust_pkg (see the
        FS::cust_pkg manpage).

    unsuspend
        Just returns false (no error) for now.

        Called by the unsuspend method of FS::cust_pkg (see the
        FS::cust_pkg manpage).

    cancel
        Just returns false (no error) for now.

        Called by the cancel method of FS::cust_pkg (see the
        FS::cust_pkg manpage).

    check
        Checks all fields to make sure this is a valid domain. If
        there is an error, returns the error, otherwise returns
        false. Called by the insert and replace methods.

        Sets any fixed values; see the FS::part_svc manpage.

    _whois
        Executes the command:

          whois do $domain

        and returns the output.

        (Always returns *No match for domian "$domain".* if
        $FS::svc_domain::whois_hack is set true.)

    submit_internic
        Submits a registration email for this domain.

VERSION
    $Id: svc_domain.txt,v 1.4 1999-04-08 13:39:32 ivan Exp $

BUGS
    All BIND/DNS fields should be included (and exported).

    Delete doesn't send a registration template.

    All registries should be supported.

    Should change action to a real field.

    The $recref stuff in sub check should be cleaned up.

SEE ALSO
    the FS::svc_Common manpage, the FS::Record manpage, the FS::Conf
    manpage, the FS::cust_svc manpage, the FS::part_svc manpage, the
    FS::cust_pkg manpage, the FS::SSH manpage, the ssh manpage, the
    dot-qmail manpage, schema.html from the base documentation,
    config.html from the base documentation.

HISTORY
    ivan@voicenet.com 97-jul-21

    rewrite ivan@sisd.com 98-mar-10

    add internic bits ivan@sisd.com 98-mar-14

    Changed 'day' to 'daytime' because Pg6.3 reserves the day word
    bmccane@maxbaud.net 98-apr-3

    /var/spool/freeside/conf/registries/internic/, Mail::Internet,
    etc. ivan@sisd.com 98-jul-17-19

    pod, some FS::Conf (not complete) ivan@sisd.com 98-sep-23

    $Log: svc_domain.txt,v $
    Revision 1.4  1999-04-08 13:39:32  ivan
    convert from pod for 1.2.0 release
 Revision 1.7 1999/04/07 14:40:15 ivan
    use all stuff that's qsearch'ed to avoid warnings

    Revision 1.6 1999/01/25 12:26:17 ivan yet more mod_perl stuff

    Revision 1.5 1998/12/30 00:30:47 ivan svc_ stuff is more
    properly OO - has a common superclass FS::svc_Common

    Revision 1.3 1998/11/13 09:56:57 ivan change configuration file
    layout to support multiple distinct databases (with own set of
    config files, export, etc.)

    Revision 1.2 1998/10/14 08:18:21 ivan More informative error
    messages and better doc for admin contact email stuff

