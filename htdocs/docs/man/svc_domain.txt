NAME
    FS::svc_domain - Object methods for svc_domain records

SYNOPSIS
      use FS::svc_domain;

      $record = create FS::svc_domain \%hash;
      $record = create FS::svc_domain { 'column' => 'value' };

      $error = $record->insert;

      $error = $new_record->replace($old_record);

      $error = $record->delete;

      $error = $record->check;

      $error = $record->suspend;

      $error = $record->unsuspend;

      $error = $record->cancel;

DESCRIPTION
    An FS::svc_domain object represents a domain. FS::svc_domain
    inherits from FS::Record. The following fields are currently
    supported:

    svcnum - primary key (assigned automatically for new accounts)
    domain
METHODS
    create HASHREF
        Creates a new domain. To add the domain to the database, see
        the section on "insert".

    insert
        Adds this domain to the database. If there is an error,
        returns the error, otherwise returns false.

        The additional fields *pkgnum* and *svcpart* (see the
        FS::cust_svc manpage) should be defined. An FS::cust_svc
        record will be created and inserted.

        The additional field *action* should be set to *N* for new
        domains or *M* for transfers.

        A registration or transfer email will be submitted unless
        $FS::svc_domain::whois_hack is true.

        The additional field *email* can be used to manually set the
        admin contact email address on this email. Otherwise, the
        svc_acct records for this package (see the FS::cust_pkg
        manpage) are searched. If there is exactly one svc_acct
        record in the same package, it is automatically used.
        Otherwise an error is returned.

    delete
        Deletes this domain from the database. If there is an error,
        returns the error, otherwise returns false.

        The corresponding FS::cust_svc record will be deleted as
        well.

    replace OLD_RECORD
        Replaces OLD_RECORD with this one in the database. If there
        is an error, returns the error, otherwise returns false.

    suspend
        Just returns false (no error) for now.

        Called by the suspend method of FS::cust_pkg (see the
        FS::cust_pkg manpage).

    unsuspend
        Just returns false (no error) for now.

        Called by the unsuspend method of FS::cust_pkg (see the
        FS::cust_pkg manpage).

    cancel
        Just returns false (no error) for now.

        Called by the cancel method of FS::cust_pkg (see the
        FS::cust_pkg manpage).

    check
        Checks all fields to make sure this is a valid domain. If
        there is an error, returns the error, otherwise returns
        false. Called by the insert and replace methods.

        Sets any fixed values; see the FS::part_svc manpage.

    _whois
        Executes the command:

          whois do $domain

        and returns the output.

        (Always returns *No match for domian "$domain".* if
        $FS::svc_domain::whois_hack is set true.)

    submit_internic
        Submits a registration email for this domain.

BUGS
    It doesn't properly override FS::Record yet.

    All BIND/DNS fields should be included (and exported).

    All registries should be supported.

    Not all configuration access is through FS::Conf!

    Should change action to a real field.

SEE ALSO
    the FS::Record manpage, the FS::Conf manpage, the FS::cust_svc
    manpage, the FS::part_svc manpage, the FS::cust_pkg manpage, the
    FS::SSH manpage, the ssh manpage, the dot-qmail manpage,
    schema.html from the base documentation, config.html from the
    base documentation.

VERSION
    $Id: svc_domain.txt,v 1.2 1998-11-13 09:56:45 ivan Exp $

HISTORY
    ivan@voicenet.com 97-jul-21

    rewrite ivan@sisd.com 98-mar-10

    add internic bits ivan@sisd.com 98-mar-14

    Changed 'day' to 'daytime' because Pg6.3 reserves the day word
    bmccane@maxbaud.net 98-apr-3

    /var/spool/freeside/conf/registries/internic/, Mail::Internet,
    etc. ivan@sisd.com 98-jul-17-19

    pod, some FS::Conf (not complete) ivan@sisd.com 98-sep-23

    $Log: svc_domain.txt,v $
    Revision 1.2  1998-11-13 09:56:45  ivan
    change configuration file layout to support multiple distinct databases (with
    own set of config files, export, etc.)
 Revision 1.2 1998/10/14 08:18:21 ivan
    More informative error messages and better doc for admin contact
    email stuff

