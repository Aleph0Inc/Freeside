<head>
  <title>Upgrading to 1.2.x</title>
</head>
<body>
<h1>Upgrading to 1.1.x from 1.2.x</h1>
<ul>
  <li>If migrating from 1.0.0, see these <a href="upgrade.html">instructions</a> first.
  <li>If migrating from less than 1.1.4, see these <a href="upgrade2.html">instructions</a> first.
  <li>Back up your data and current Freeside installation.
  <li>Install the Perl module <a href="http://www.perl.com/CPAN/modules/by-module/String/">String-Approx</a>
  <li><a href="config.html">Configuration file</a> location has changed!
  <li>Move /var/spool/freeside/dbdef.<i>datasrc</i> to /usr/local/etc/freeside/dbdef.<i>datasrc</i>.
  <li>Move /var/spool/freeside/counters to /usr/local/etc/freeside/counters.<i>datasrc</i>.
  <li>Move /var/spool/freeside/export to /usr/local/etc/freeside/export.<i>datasrc</i>.
  <li>Apply the following changes to your database:
<pre>
<!-- ALTER TABLE cust_main ADD middle varchar(80) NULL;
ALTER TABLE cust_main ADD titlenum int NULL;
-->ALTER TABLE cust_main CHANGE state state varchar(80) NULL;
ALTER TABLE cust_main_county CHANGE state state varchar(80) NULL;
ALTER TABLE cust_main_county ADD country char(2);
UPDATE cust_main SET country = "US" where country IS NULL OR country = '';
UPDATE cust_main_county SET country = "US" where country IS NULL OR country = "";
<!--CREATE TABLE part_title (
   titlenum int NOT NULL,
   title varchar(80) NOT NULL,
   PRIMARY KEY (titlenum)
);
-->CREATE TABLE cust_main_invoice (
   destnum int NOT NULL,
   custnum int NOT NULL,
   dest varchar(80) NOT NULL,
   PRIMARY KEY (destnum),
   INDEX ( custnum )
);
</pre>
  <li>Run bin/dbdef-create.  This file uses MySQL-specific syntax.  If you are running a different database engine you will need to modify it slightly.
  <li>Copy or symlink htdocs and site_perl to the new copies.
</body>
