%
% my $conf = new FS::Conf;
%
% $cgi->param('custnum') =~ /^(\d+)$/
%   or die "No customer specified (bad URL)!";
% my $custnum = $1;
%
% my $cust_main = qsearchs('cust_main', {'custnum' => $custnum} );
% die "Custimer not found!" unless $cust_main;
%
% my (@notes) = $cust_main->notes();
% if ( scalar(@notes) ) { 

<STYLE TYPE="text/css">

body { background: #e8e8e8 }
.inv table { border: none }
.inv TH { border: none }
.inv TD { border: none }

</STYLE>

<TABLE CLASS="inv" CELLSPACING=0 CELLPADDING=0 BORDER=0 >

%#<% include('/elements/table-grid.html') %>
%   my $bgcolor1 = '#eeeeee';
%   my $bgcolor2 = '#ffffff';
%   my $bgcolor = '';
%
%   foreach my $note (@notes) {
%
%   if ( $bgcolor eq $bgcolor1 ) {
%     $bgcolor = $bgcolor2;
%   } else {
%     $bgcolor = $bgcolor1;
%   }
%
%

<TR>
  <% note_datestr($note,$conf,$bgcolor) %>
  <TD CLASS="inv" BGCOLOR="<% $bgcolor %>">
    &nbsp;<%$note->otaker%>&nbsp;
  </TD>
  <TD CLASS="inv" BGCOLOR="<% $bgcolor %>">
    &nbsp;<%$note->comments%>
  </TD>
</TR>

% } #end display notes

</TABLE>
% } else { 

<BR>
% } 
%
%#subroutines
%
%sub note_datestr {
% my($note, $conf, $bgcolor) = @_ or return '';
% my $format=qq{<TD class="inv" bgcolor="$bgcolor" align="left"><B>%b</B></TD>}.
%            qq{<TD class="inv" bgcolor="$bgcolor" align="right"><B>&nbsp;%o,</B></TD>}.
%            qq{<TD class="inv" bgcolor="$bgcolor" align="right"><B>&nbsp;%Y&nbsp;</B></TD>};
% $format .= qq{<TD class="inv" bgcolor="$bgcolor" ALIGN="right"><B>&nbsp;%l</TD>}.
%            qq{<TD class="inv" bgcolor="$bgcolor" ALIGN="center"><B>:</B></TD>}.
%            qq{<TD class="inv" bgcolor="$bgcolor" ALIGN="left"><B>%M</B></TD>}.
%            qq{<TD class="inv" bgcolor="$bgcolor" ALIGN="left"><B>&nbsp;%P&nbsp;</B></TD>}
%     if $conf->exists('cust_main_note-display_times');
%   ( my $strip = time2str($format, $note->_date) ) =~ s/ (\d)/$1/g;
%   $strip;
% }
%

