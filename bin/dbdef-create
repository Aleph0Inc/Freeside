#!/usr/bin/perl -Tw
#
# $Id: dbdef-create,v 1.6 2002-09-19 13:34:52 ivan Exp $

use strict;
use DBI;
use DBIx::DBSchema 0.21;
use FS::UID qw(adminsuidsetup datasrc driver_name);

my $user = shift or die &usage;

my($dbh)=adminsuidsetup $user;

#needs to match FS::Record
my($dbdef_file) = "/usr/local/etc/freeside/dbdef.". datasrc;

my $dbdef = new_native DBIx::DBSchema $dbh;

#print $dbdef->pretty_print;

#important
$dbdef->save($dbdef_file);

sub usage {
  die "Usage:\n  dbdef-create user\n";
}
