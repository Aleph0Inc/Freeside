#!/usr/bin/perl -Tw
#
# $Id: dbdef-create,v 1.5 2001-08-21 02:43:18 ivan Exp $

use strict;
use DBI;
use DBIx::DBSchema;
use FS::UID qw(adminsuidsetup datasrc driver_name);

my $user = shift or die &usage;

my($dbh)=adminsuidsetup $user;

#needs to match FS::Record
my($dbdef_file) = "/usr/local/etc/freeside/dbdef.". datasrc;

my $dbdef = new_native DBIx::DBSchema $dbh;

#print $dbdef->pretty_print;

#important
$dbdef->save($dbdef_file);

sub usage {
  die "Usage:\n  dbdef-create user\n";
}
